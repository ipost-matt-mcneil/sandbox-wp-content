{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/alert-banner/message-banner.data.js","webpack:///./js/alert-banner/preoutClose.data.js","webpack:///./js/utils/data-store.js","webpack:///./js/utils/domain-utils.js","webpack:///./js/utils/globals.js","webpack:///./js/app.js","webpack:///./js/page-init/page-init.js","webpack:///./js/article-video/article-video.js","webpack:///./js/social-sharing/infographic-share.js","webpack:///./js/social-sharing/page-share.js","webpack:///./js/navigation/navigation.js","webpack:///./js/gdpr/gdpr.js","webpack:///./js/utils/cookies.js","webpack:///./js/animations/animations.js","webpack:///./js/animations/events-empty/events-empty.js","webpack:///./js/alert-banner/cookies.js","webpack:///./js/utils/getJSON.js","webpack:///./js/alert-banner/global-alert-banner.js","webpack:///./js/utils/polyfills.js","webpack:///./js/search/search.js","webpack:///./js/skip-link-focus-fix/skip-link-focus-fix.js","webpack:///./js/tables/tables.js","webpack:///./js/pagination/pagination.js","webpack:///./js/utils/focus-ring-handler.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","banner","MessageBannerData","globalBanner","configureMessage","this","message","getPreoutClose","setMessageStore","msg","url","window","location","href","indexOf","parent","getAppUrl","cpcAlertBannerMsgs","default","urlMap","findMessage","initialize","domain","crossDomain","parser","DomainParser","isLocalhost","hostname","port","subDomain","getCanadaPostSubdomain","protocol","getBannerMessageApiUrl","banners","length","isEmptyMessage","messageMap","match","Array","slice","find","mapItem","regex","RegExp","split","path","trim","setStore","storeKeys","setPreoutClose","setCookie","getCookie","store","cwc","nav","getStore","getCwc","linkParser","document","createElement","localhostRegEx","constants","getLocation","isSubdomainSSO","mapSSODomain","test","parsedUrl","startsWith","getCanadaPostDomain","isSubdomainEST","replace","testUrlParser","host","ssoUrl","ssoLocation","sso","stg004","stg003","stg002","stg001","dev003","dev002","dev001","mobileUpperBound","tabletUpperBound","smallDesktopUpperBound","events","addEventListener","removeEventListener","mouseEnter","mouseLeave","mouseOver","click","focus","blur","resize","keypress","focusOut","componentClassName","false","true","a11y","ariaLabel","ariaRole","adjustFooter","setTimeout","clientHeight","innerHeight","body","mainHeight","querySelector","offsetHeight","classList","add","remove","initializeArticleVideo","videoRefCollection","querySelectorAll","e","preventDefault","parentElement","item","iframe","src","getAttribute","setAttribute","videoPlay","shareToggleRibbon","onresize","resizeRibbon","socialToggles","handleClickSocialToggle","handleKeyPressSocialToggle","socialBtns","handleClickSocialShare","shareImage","curWindowWidth","clientWidth","style","cssText","width","ele","toggle","newTabIndex","contains","socialLinks","tabIndex","shareURL","FBDesc","FBTitle","FBPic","FB","ui","method","action_type","display","action_properties","JSON","stringify","emailSubject","emailBody","top","screen","availHeight","left","availWidth","open","evt","curElement","target","srcElement","which","keyCode","handleKeyPressSocial","ssPluginLoadPopupJS","em","shareurl","ogUrl","ogTitle","ogImage","socialShareBtns","headerContainer","headerContainerStickyClass","navigation","navigationContainer","navigationOverlay","navigationParent","navigationLast","navigationHamburger","hamburgerIcon","subMenu","lastScrollTop","shiftOn","navigationDropdown","event","innerWidth","type","hasClass","nextElementSibling","navigationItemClass","navigationRemoveActiveClass","activeSubMenu","getElementsByClassName","previousElementSibling","navigationDropdownLast","firstChild","navigationDropdownLeave","hamburgerMenu","touchMovePreventDefault","touchMoveStopPropagation","stickyHeader","pageHeight","documentElement","scrollHeight","currentScrollTop","pageYOffset","scrollTop","headerHeight","stickyHeaderIE","wd","wheelDelta","csp","scrollTo","overlayClose","stopPropagation","element","cls","className","navigator","userAgent","mobileMenuElement","translationMenuElement","clone","cloneNode","appendChild","insertMobileLanguageToggle","GdprCookieBanner","_options","CFG_EXCLUDED_PAGES","resizeCookieWidth","excludedPages","onClick","dismissBanner","onKeyup","track","bannerElm","parentNode","removeChild","_satellite","console","debug","mainContainerWidth","offsetWidth","pathname","isExcludedPage","dismissCtaElms","registerEventHandler","cookieName","expiredays","ifEscape","exdate","Date","expiredate","root","cookieValue","setDate","getDate","toGMTString","expires","escape","cookie","start","end","unescape","substring","getElementById","animation","bodymovin","loadAnimation","container","renderer","loop","autoplay","play","getRootDomain","syncAllLangCookies","lang","toLowerCase","callback","xhr","XMLHttpRequest","responseType","onload","status","responseData","response","parse","send","bannerEle","GlobalAlertBanner","bannerHtml","fragment","createDocumentFragment","containerDiv","globals","globalAlertBannerClass","createBannerContainer","innerHTML","items","closeIconClass","closeAriaLabel","template","language","locale","close","getBanner","insertAdjacentElement","alertBanner","closeButton","setEventHandlers","htmlTag","en","fr","onCloseClick","setBannerHeight","height","bannerHeight","getBannerHeight","getClientRects","predicate","TypeError","len","thisArg","arguments","k","kValue","String","searchString","position","substr","NodeList","forEach","cpDomain","getCanadaPostDomainUrl","searchTriggerValue","ptaSearchLengthTrigger","initializeSearch","initOptions","$","jQuery","mobileWidth","searchURL","searchPageURL","searchModal","bodyElement","searchBtnElement","searchBtnElementMobile","isCommonComponent","searchModalElement","showSearchClick","showSearchKeyPress","hideSearchClick","searchPopup","searchModalClose","shiftKey","lastTabindex","searchModalInput","searchModalBtn","performSearch","searchModalResults","hideInputError","searchInputError","quickLinks","quickLink","navIcon","removeAttribute","doSearch","ajax","data","searchInput","success","payload","text","ResultSet","searchResult","entry","regEx","resultMatch","activeElement","SkipNavigation","hash","hasAttribute","mainContent","mainContentAttr","createAttribute","setAttributeNode","addEvent","initializeTables","table","log","prev","next","childElementCount","changeTableColumn","direction","tableRows","tableCells","limit","y","first","last","viewing","loading","FocusRingHandler","elementTypes","onFocus","isKeyboardActivated","detail","pointerType","mozInputSource","isActivatedByKeyboard"],"mappings":"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","file":"script.dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","/**\r\n * Global message banner config and persistence.\r\n *\r\n * Messages must support the following API. Note that a default\r\n * message should always be specified.\r\n *\r\n * Optionally, for page specific messages, define a urlMap, which is\r\n * a regular expression lookup. The first matching regex is the message\r\n * entry that's used. If no map entries match, then the default message is used.\r\n *\r\n * window.cpcAlertBannerMsgs = {\r\n *   default: { \r\n *     fr: 'French message',\r\n *     en: 'English message'\r\n *   },\r\n *   urlMap: [ \r\n *     {\r\n *       regex: /some-url-regex/i,\r\n *       fr: 'French message',\r\n *       en: 'English message' \r\n *     },\r\n *     {\r\n *       regex: /another-url-regex/i,\r\n *       fr: 'French message',\r\n *       en: 'English message' \r\n *     }\r\n *   ]\r\n */\r\nimport { getPreoutClose } from './preoutClose.data';\r\nimport { setStore, storeKeys } from '../utils/data-store';\r\nimport DomainParser from '../utils/domain-utils';\r\nimport getJSON from '../utils/getJSON';\r\n\r\nlet banner;\r\nexport default class MessageBannerData {\r\n  initialize(globalBanner) {\r\n    banner = globalBanner;\r\n    configureMessage.call(this);\r\n  }\r\n\r\n  /**\r\n   * Returns null if there is either no message to show to users, or if the\r\n   * user has closed the global message banner.\r\n   *\r\n   * @returns global message banner HTML otherwise.\r\n   */\r\n  getMessage() {\r\n    return this.message;\r\n  }\r\n}\r\n\r\n// Private implementation\r\n\r\n/*\r\n * Populates the in-memory store based on the correct banner\r\n * message to show \r\n */\r\nfunction configureMessage() {\r\n  if (getUserClosedBannerFlag()) {\r\n    setMessageStore(null);\r\n    return;\r\n  }\r\n\r\n  const url = getAppUrl();\r\n  if (isDefinedCpcAlertBannerMsgs(window.cpcAlertBannerMsgs)) {\r\n    // For compatible with the legacy banner temporarily.\r\n    // Should be removed once the cpc-banner app deployed\r\n    setMessageStore(findMessage(window.cpcAlertBannerMsgs, url));\r\n    banner.initialize();\r\n  } else {\r\n    // call CWC\r\n    getJSON(getBannerMessageApiUrl(), (banners) => {\r\n      if (isEmptyMessage(banners)) {\r\n        setMessageStore(null);\r\n        return;\r\n      }\r\n\r\n      setMessageStore(findMessage(banners, url));\r\n      banner.initialize();\r\n    });\r\n  }\r\n}\r\n\r\nfunction findMessage(messageMap, url) {\r\n  // No message map defined\r\n  if (!messageMap) return null;\r\n\r\n  const hasMap = messageMap.urlMap && typeof messageMap.urlMap === 'object'\r\n    && messageMap.urlMap.length > 0;\r\n\r\n  if (hasMap) {\r\n    const match = Array.prototype.slice.call(messageMap.urlMap).find((mapItem) => {\r\n      if (mapItem.regex instanceof RegExp) {\r\n        return url.match(mapItem.regex);\r\n      }\r\n\r\n      return mapItem.regex.split(',').find(path => url.match(new RegExp(path.trim(), 'i')));\r\n      // mapItem => mapItem.regex && url.match(mapItem.regex)\r\n    });\r\n    if (match) {\r\n      return match;\r\n    }\r\n  }\r\n  return messageMap.default;\r\n}\r\n\r\n/*\r\n * Returns true if user has closed the global message banner and it should be\r\n * suppressed, false otherwise. \r\n */\r\nfunction getUserClosedBannerFlag() {\r\n  return getPreoutClose();\r\n}\r\n\r\nfunction setMessageStore(message) {\r\n  if (!message) return;\r\n  setStore(storeKeys.banner, message);\r\n}\r\n\r\nconst BANNER_MESSAGE_API_PATH = '/cwc/components/api/bannermsg';\r\n\r\nfunction getBannerMessageApiUrl() {\r\n  let domain = '';\r\n  let crossDomain = false;\r\n\r\n  const parser = new DomainParser(window.location);\r\n  if (parser.isLocalhost()) {\r\n    domain = `${window.location.hostname}:${window.location.port}`;\r\n    //\r\n    // Enable the below if you want to test CWC locally running on port 7080\r\n    //\r\n    // crossDomain = true;\r\n    // domain = 'localhost:7080';\r\n  } else {\r\n    const subDomain = parser.getCanadaPostSubdomain();\r\n    domain = `${subDomain}.canadapost-postescanada.ca`;\r\n    if (domain !== window.location.hostname) {\r\n      // for epost.ca domain\r\n      crossDomain = true;\r\n    } else if (subDomain === 'est') {\r\n      // IA-4103\r\n      //\r\n      // For EST production (https://est.canadapost-postescanada.ca)\r\n      crossDomain = true;\r\n      domain = 'www.canadapost-postescanada.ca';\r\n    }\r\n  }\r\n\r\n  const url = `${window.location.protocol}//${domain}${BANNER_MESSAGE_API_PATH}`;\r\n  return crossDomain ? `${url}?callback=?` : url;\r\n}\r\n\r\nfunction isEmptyMessage(banners) {\r\n  if (banners.default === null && !banners.urlMap) {\r\n    return true;\r\n  }\r\n  return banners.default === null && banners.urlMap.length === 0;\r\n}\r\n\r\nfunction isDefinedCpcAlertBannerMsgs(msg) {\r\n  return msg && (msg.default || msg.urlMap);\r\n}\r\n\r\nfunction getAppUrl() {\r\n  let url = window.location.href;\r\n  if (url.indexOf('EDMS/inc/header_footer')) {\r\n    // eConnect: running header/footer in 2 separated iFrames\r\n    url = window.parent.location.href;\r\n  }\r\n\r\n  return url;\r\n}","/**\r\n * Simple API to get/set \"preoutClose\" cookie, which is the cookie \r\n * responsible for determining if a user has closed the global \r\n * alert banner. \r\n * \r\n * This implementation brings in the behaviour of the previous \r\n * cookie reading logic from the old personal site, which evaluated \r\n * the cookie as follows:\r\n * \r\n * - if no preoutClose cookie - show global alert banner\r\n * - if preoutClose cookie exists and value is set to an empty string - show global alert banner\r\n * - if preoutClose cookie exists no matter what the value (0, 1, whatever) - suppress the global alert banner\r\n */\r\nimport { getCookie, setCookie } from './cookies';\r\n\r\nconst cookieName = 'preoutClose';\r\n\r\n/**\r\n * Sets the preoutClose cookie, with an expiration of 1 day. Recommend\r\n * to set with either a blank value, or a 1 value\r\n * \r\n * @param {string} value - value of cookie\r\n */\r\nfunction setPreoutClose(value) {\r\n  setCookie(cookieName, value, 1, false);\r\n}\r\n\r\n/**\r\n * Returns a boolean representation of preoutClose cookie reflecting \r\n * whether or not user has closed the global alert banner\r\n */\r\nfunction getPreoutClose() {\r\n  return getCookie(cookieName) !== '';\r\n}\r\n\r\nexport { setPreoutClose, getPreoutClose };","/**\n * Simple API to make CWC properties globally available\n */\nconst store = []; \n\n/**\n * Available list of in-memory persistence stores\n */\nconst storeKeys = { \n  cwc: 'cwc',\n  nav: 'nav',\n  banner: 'banner'\n};\n\n/**\n * Sets in-memory store. \n * \n * @param {key} - Store key. See the storeKeys const\n * @param {value} - corresponding value\n */\nfunction setStore(key, value) {\n  store[key] = value;  \n}\n\n/**\n * Gets the given in-memory store\n * @returns {key} - one of storeKeys\n */\nfunction getStore(key) {\n  return store[key];\n}\n\nfunction getCwc() {\n  return getStore(storeKeys.cwc);\n}\n\nexport {\n  setStore, getStore, storeKeys, getCwc \n};","const linkParser = document.createElement('a');\nconst localhostRegEx = /localhost/i;\nconst constants = { \n  www: 'www',\n  cpDotCa: '.canadapost-postescanada.ca'\n};\n\n/**\n * Utilities for parsing URL to get current domain / subdomain, map \n * SSO domain URLs to canadapost-postescanada.ca domain URLs\n */\nexport default class DomainParser { \n  /**\n   * Constructs a new instance of domain parser\n   * @param {string} url - full URL with scheme. If scheme is not provided, \n   *        url is assumed related to current domain\n   */\n  constructor(url) {\n    this.url = getLocation(url);\n  }\n\n  /**\n   * Returns a string representing the subdomain of the current environment. I.e.: \n   * www.canadapost-postescanada.ca -> returns www\n   * stg12.canadapost-postescanada.ca -> returns stg12\n   * localhost -> www.\n   * \n   * SSO domains return an appropriately mapped stg12, www., \n   * etc. domain i.e.: \n   * stg002-sso.epost.ca -> returns stg12 since stg002-sso maps\n   *                        to the stg12 environment\n   */\n  getCanadaPostSubdomain() {\n    if (isSubdomainSSO.call(this)) {\n      return mapSSODomain(this.url);\n    }\n    return localhostRegEx.test(this.url.hostname) ? constants.www\n      : this.url.hostname.split('.')[0];\n  }\n\n  /**\n   * Takes a relative URL and converts it to a canadapost-postescanada.ca domain URL\n   * @param {string} url - relative URL\n   */\n  getCanadaPostDomainUrl(url) {\n    const parsedUrl = url.startsWith('/') || url.length === 0 ? url : `/${url}`;\n    return localhostRegEx.test(this.url.hostname)\n      ? url\n      : `https://${this.getCanadaPostDomain()}${parsedUrl}`;\n  }\n\n  /**\n   * Returns a string representing the canadapost-postescanada.ca domain URL for the current environment. I.e.: \n   * www.canadapost-postescanada.ca/blah -> returns www.canadapost-postescanada.ca\n   * stg12.canadapost-postescanada.ca/blah -> returns stg12.canadapost-postescanada.ca\n   * localhost -> www.canadapost-postescanada.ca\n   * \n   * SSO domains return an appropriately mapped stg12, www., \n   * etc. domain i.e.: \n   * stg002-sso.epost.ca -> returns stg12.canadapost-postescanada.ca since stg002-sso maps\n   *                        to the stg12 environment\n   */\n  getCanadaPostDomain() {\n    if (isSubdomainSSO.call(this)) {\n      return `${mapSSODomain(this.url)}${constants.cpDotCa}`;\n    }\n\n    if (isSubdomainEST.call(this)) {\n      return this.url.hostname.replace('est', 'www');\n    }\n\n    return localhostRegEx.test(this.url.hostname) \n      ? `${constants.www}${constants.cpDotCa}`\n      : this.url.hostname.replace('.est', '');\n  }\n\n  /**\n   * Compares the given url's scheme + host + port\n   * to the scheme + host + port of the current page\n   *  \n   * @param {string} url \n   * @returns {boolean} true if everything matches, false otherwise\n   */\n  isUrlSameDomain(url) {\n    const testUrlParser = document.createElement('a'); \n    testUrlParser.href = url;\n    \n    // IE fun - IA-3772\n    if (testUrlParser.host === '') {\n      testUrlParser.href = testUrlParser.href; // eslint-disable-line no-self-assign\n    }\n\n    return this.url.protocol === testUrlParser.protocol \n      && this.url.host === testUrlParser.host\n      && this.url.port === testUrlParser.port;\n  }\n\n  isLocalhost() {\n    return localhostRegEx.test(this.url.hostname);\n  }\n}\n\nfunction isSubdomainEST() {\n  return /^est\\./i.test(this.url.hostname);\n}\n\nfunction isSubdomainSSO() {\n  return /\\.epost\\.ca/i.test(this.url.hostname);\n}\n\n/**\n * Receives an epost.ca SSO URL and depending on the sub-domain, maps it to \n * one of our dev / stg / prod environments. If no mapping is found, \n * falls back to www. Examples: \n * \n * https://sso.epost.ca/sso/blah -> 'www'\n * https://stg002-sso.epost.ca/sso/blah -> 'stg12'\n * \n * At this time, dev10 and dev11 both use dev001-sso, but\n *   dev001-sso maps to dev10\n * At this time, stg10 and stg11 both use stg001-sso, but\n *   stg001-sso maps to stg10\n * At this time, sso maps to www, but beta* and prd* environments\n *   also use www. \n * \n * @param {string} - Canada Post SSO URL \n * @return {string} - matching dev/stg/prd environment, or www\n *   if SSO environment doesn't match with anything\n */\nfunction mapSSODomain(ssoUrl) {\n  const ssoLocation = getLocation(ssoUrl);\n  const ssoSubdomain = localhostRegEx.test(ssoLocation.hostname) ? constants.www \n    : ssoLocation.hostname.split('.')[0].replace('-sso', '').replace('-www', '');\n\n  const ssoMap = { \n    sso: 'www',\n    stg004: 'stg14',\n    stg003: 'stg13',\n    stg002: 'stg12',\n    stg001: 'stg10',\n    dev003: 'dev13',\n    dev002: 'dev12',\n    dev001: 'dev10'\n  };\n\n  return ssoMap[ssoSubdomain] || constants.www; \n}\n\n/**\n * Takes a string location, and returns a corresponding Location object\n * @param {string} url \n * @returns {Location} corresponding Location object\n */\nfunction getLocation(url) {\n  linkParser.href = url;\n  return linkParser;\n}","/**\n * Global variables...\n */\nexport default { \n  mobileUpperBound: 640,\n  tabletUpperBound: 1024,\n  smallDesktopUpperBound: 1440,\n\n  events: { \n    addEventListener: 'addEventListener',\n    removeEventListener: 'removeEventListener',\n    mouseEnter: 'mouseenter',\n    mouseLeave: 'mouseleave',\n    mouseOver: 'mouseover',\n    click: 'click',\n    focus: 'focus',\n    blur: 'blur',\n    resize: 'resize',\n    keypress: 'keypress',\n    focusOut: 'focusout'\n  },\n\n  cwc: { \n    componentClassName: 'cpc-component'\n  },\n\n  false: 'false',\n  true: 'true',\n\n  a11y: { \n    ariaLabel: 'aria-label',\n    ariaRole: 'aria-role'\n  }\n};","import '../scss/style.ch.scss';\n\nimport './page-init/page-init';\nimport './article-video/article-video';\nimport './social-sharing/infographic-share';\nimport './social-sharing/page-share';\nimport './navigation/navigation';\nimport './gdpr/gdpr';\nimport './animations/animations';\nimport './alert-banner/message-banner.data';\nimport './alert-banner/global-alert-banner';\nimport './utils/polyfills';\nimport './search/search';\nimport './skip-link-focus-fix/skip-link-focus-fix';\nimport './tables/tables';\nimport './pagination/pagination';\n\n// important: must focus-ring-handler must be last\nimport './utils/focus-ring-handler';\n","/* eslint-disable */\n\n/* Page initialization\n  Global functions to be executed at page load\n  - adjustFooter() - Pin footer to bottom of page if not enough content is present\n*/\n\ndocument.addEventListener('DOMContentLoaded', initializeComponent);\n\nfunction initializeComponent() {\n  adjustFooter();\n  window.addEventListener('resize', adjustFooter, false );\n}\n\nfunction adjustFooter() {\n  window.setTimeout(function() { // Required for orientation change\n    const clientHeight = window.innerHeight || document.clientHeight || body.clientHeight;\n    const mainHeight = document.querySelector('.main').offsetHeight || 0;\n    const headerHeight = document.querySelector('.header ').offsetHeight || 0;\n    const footerHeight = document.querySelector('.footer').offsetHeight || 0;\n\n    if (headerHeight + mainHeight + footerHeight < clientHeight) {\n      document.querySelector('.footer').classList.add('footer--is-anchored');\n    } else {\n      document.querySelector('.footer').classList.remove('footer--is-anchored');\n    }\n  }, 200);\n}\n\n","/* eslint-disable */\n\n/**\n * Method referenced from: https://codepen.io/pixelthing/pen/zGZKaQ\n */\n\ndocument.addEventListener('DOMContentLoaded', initializeArticleVideo);\n\nfunction initializeArticleVideo() {\n  const videoReferenceAttribute = '.js-videoPoster';\n  const videoRefCollection = document.querySelectorAll(`${videoReferenceAttribute}`);\n\n  if (videoRefCollection.length > 0) {\n\n      for (let i = 0; i < videoRefCollection.length; i++) {\n      videoRefCollection[i].addEventListener('click', clickHandler.bind(videoRefCollection[i]));\n\n      function clickHandler(e) {\n        e.preventDefault();\n        const item = this;\n        const parent = item.parentElement;\n        videoPlay(parent);\n      }\n\n      function videoPlay(parentElement) {\n        const item = parentElement;\n        const iframe = item.querySelector('.js-videoIframe');\n        const src = iframe.getAttribute('data-src');\n        // hide poster\n        item.classList.add('videoWrapperActive');\n        // add iframe src in, starting the video\n        iframe.setAttribute('src', src);\n      }\n\n      function videoStop(parent) {\n        // if we're stopping all videos on page\n        if (!parent) {\n          const parent = $('.js-videoWrapper');\n          const iframe = $('.js-videoIframe');\n          // if we're stopping a particular video\n        } else {\n          const iframe = parent.find('.js-videoIframe');\n        }\n        \n        // reveal poster\n        parent.removeClass('videoWrapperActive');\n        // remove youtube link, stopping the video from playing in the background\n        iframe.attr('src', '');\n      }\n    };\n  }\n}\n\n/*\n<div class=\"videoWrapper js-videoWrapper\">\n    <iframe class=\"videoIframe js-videoIframe\" src=\"\" frameborder=\"0\" allowTransparency=\"true\" allowfullscreen data-src=\"https://www.youtube.com/embed/hgzzLIa-93c?autoplay=1& modestbranding=1&rel=0&hl=sv\"></iframe>\n    <button class=\"videoPoster js-videoPoster\" style=\"background-image:url(http://i2.wp.com/www.cgmeetup.net/home/wp-content/uploads/2015/05/Avengers-Age-of-Ultron-UI-Reel-1.jpg);\">Play video</button>\n</div>\n*/\n\nexport default initializeArticleVideo;","/**\n * infographic-share\n * This component will attach listeners to social-share buttons located in an\n * inforgraphic ribbon and execute the sharing functionality.  It will also\n * execute show/hide animation for the ribbon for large & above resolutions.\n */\n\ndocument.addEventListener('DOMContentLoaded', initializeInfographicSharing);\nconst shareToggleRibbon = document.querySelectorAll('.share-toggle');\n\nfunction initializeInfographicSharing() {\n  if (shareToggleRibbon.length === 0) return;\n\n  window.onresize = () => {\n    resizeRibbon();\n  };\n  resizeRibbon();\n\n  const socialToggles = document.querySelectorAll('.share-toggle-button');\n  for (let i = 0; i < socialToggles.length; i += 1) {\n    socialToggles[i].addEventListener('click', handleClickSocialToggle.bind(this, socialToggles[i]));\n    socialToggles[i].addEventListener('keyup', handleKeyPressSocialToggle);\n  }\n\n  const socialBtns = document.querySelectorAll('.share-button');\n  for (let i = 0; i < socialBtns.length; i += 1) {\n    socialBtns[i].addEventListener('click', handleClickSocialShare.bind(this, socialBtns[i]));\n    socialBtns[i].addEventListener('keyup', handleKeyPressSocialToggle);\n  }\n}\n\nfunction resizeRibbon() {\n  const shareImage = document.querySelectorAll('.infographic-container img');\n  const curWindowWidth = document.body.clientWidth;\n\n  if (curWindowWidth > 640) {\n    shareToggleRibbon[0].style.cssText = '';\n    return;\n  }\n\n  if (curWindowWidth <= 640) {\n    shareToggleRibbon[0].style.cssText = `width: ${shareImage[0].width + 25}px`;\n  } else {\n    shareToggleRibbon[0].style.cssText = '';\n  }\n}\n\nfunction handleClickSocialToggle(ele) {\n  // const shareToggleRibbon = document.querySelectorAll('.share-button');\n\n  ele.parentElement.classList.toggle('share-clicked-state');\n  let newTabIndex = '0';\n  if (ele.parentElement.classList.contains('share-clicked-state')) {\n    ele.parentElement.setAttribute('aria-expanded', true);\n    ele.setAttribute('aria-label', 'close links');\n    newTabIndex = '0';\n  } else {\n    ele.setAttribute('aria-label', 'expand links');\n    ele.parentElement.setAttribute('aria-expanded', false);\n    newTabIndex = '-1';\n  }\n  const socialLinks = document.querySelectorAll('.infographic-container a');\n  for (let i = 1; i < socialLinks.length; i += 1) {\n    socialLinks[i].tabIndex = newTabIndex;\n  }\n  ele.blur();\n}\n\nfunction handleClickSocialShare(ele) {\n  let shareURL = '';\n\n  if (ele.classList.contains('share-linkedin')) {\n    // const linkedin_title = ele.getAttribute('data-title') || ''; * Titles have been deprecated for LI shares\n    const linkedinUrl = ele.getAttribute('data-url') || '';\n    // shareURL = `http://www.linkedin.com/shareArticle?mini=true&url=${linkedinUrl}&title=${linkedin_title}`;\n    shareURL = `http://www.linkedin.com/shareArticle?mini=true&url=${linkedinUrl}`;\n  } else if (ele.classList.contains('share-facebook')) {\n    const FBDesc = ele.getAttribute('data-description') || '';\n    const FBTitle = ele.getAttribute('data-caption') || '';\n    const FBPic = ele.getAttribute('data-img') || '';\n\n    // This approach isn't officially supported and while it's worked for several years eventually it will break.\n    window.FB.ui({\n      method: 'share_open_graph',\n      action_type: 'og.shares',\n      display: 'popup',\n      action_properties: JSON.stringify({\n        object: {\n          'og:url': FBPic,\n          'og:title': FBTitle,\n          'og:description': FBDesc,\n          'og:image': FBPic\n        }\n      })\n    });\n    return false;\n  } else if (ele.classList.contains('share-twitter')) {\n    const twitterText = ele.getAttribute('data-text') || '';\n    const twitterUrl = ele.getAttribute('data-url') || '';\n    shareURL = `http://twitter.com/intent/tweet/?text=${twitterText}&url=${twitterUrl}`;\n  } else if (ele.classList.contains('share-email')) {\n    const emailSubject = ele.getAttribute('data-subject') || '';\n    const emailBody = ele.getAttribute('data-body') || '';\n    window.location.href = `mailto:?subject=${emailSubject}&body=${emailBody}`;\n    return false;\n  } else if (ele.classList.contains('share-download')) {\n    return false;\n  }\n\n  const top = (window.screen.availHeight - 500) / 2;\n  const left = (window.screen.availWidth - 500) / 2;\n  window.open(\n    shareURL,\n    'social sharing',\n    `width=550,height=420,left=${left},top=${top},location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1`\n  );\n  ele.blur();\n\n  return false;\n}\n\nfunction handleKeyPressSocialToggle(evt) {\n  const curElement = evt.target || evt.srcElement;\n  const key = evt.which || evt.keyCode;\n\n  if (key === 13) {\n    curElement.click();\n    curElement.focus();\n  }\n}\n","/* global FB */\n/**\n * File: page-social.js.\n *\n * Handles the click-events for social sharing that is present on each page.\n *\n */\n\ndocument.addEventListener('DOMContentLoaded', initializeSocialSharing);\n\nfunction initializeSocialSharing() {\n  const socialShareBtns = document.querySelectorAll('.js-social');\n  for (let i = 0; i < socialShareBtns.length; i += 1) {\n    socialShareBtns[i].addEventListener('click', ssPluginLoadPopupJS.bind(this, socialShareBtns[i]));\n    socialShareBtns[i].addEventListener('keyup', handleKeyPressSocial);\n  }\n}\n\nfunction handleKeyPressSocial(evt) {\n  const curElement = evt.target || evt.srcElement;\n  const key = evt.which || evt.keyCode;\n\n  if (key === 13) {\n    curElement.click();\n    curElement.focus();\n  }\n}\n\nfunction ssPluginLoadPopupJS(em) {\n  const shareurl = em.getAttribute('data-href');\n  const top = (window.screen.availHeight - 500) / 2;\n  const left = (window.screen.availWidth - 500) / 2;\n  if (em.classList.contains('icon--facebook')) {\n    const ogUrl = em.getAttribute('data-url');\n    const ogTitle = em.getAttribute('data-quote');\n    const ogImage = (document.querySelector(\"meta[property='og:image']\"))\n      ? document.querySelector(\"meta[property='og:image']\").getAttribute('content')\n      : '';\n\n\n    // This approach isn't officially supported and while it's worked for several years eventually it will break.\n    FB.ui({\n      method: 'share_open_graph',\n      action_type: 'og.shares',\n      display: 'popup',\n      action_properties: JSON.stringify({\n        object: {\n          'og:url': ogUrl,\n          'og:title': ogTitle,\n          'og:image': ogImage\n        }\n      })\n    });\n  } else {\n    window.open(\n      shareurl,\n      'social sharing',\n      `width=550,height=420,left=${left},top=${top},location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1`\n    );\n  }\n  return false;\n}\n","const body = document.querySelector('body');\nconst headerContainer = document.querySelector('.header__container');\nconst headerContainerClass = 'header__container';\nconst headerContainerStickyClass = 'header__container header__container--is-sticky';\nconst headerContainerScrollingClass = 'header__container header__container--is-scrolling';\nconst navigation = document.querySelector('.navigation');\nconst navigationClass = 'navigation';\nconst navigationActiveClass = 'navigation navigation--is-active';\nconst navigationContainer = document.querySelector('.navigation__container');\nconst navigationContainerClass = 'navigation__container';\nconst navigationContainerActiveClass = 'navigation__container navigation__container--is-active';\nconst navigationOverlay = document.querySelector('.navigation__overlay');\nconst navigationOverlayClass = 'navigation__overlay';\nconst navigationOverlayActiveClass = 'navigation__overlay navigation__overlay--is-active';\nconst navigationItemClass = 'navigation__item';\nconst navigationParent = document.querySelectorAll('.navigation__item--is-parent > a');\nconst navigationLast = document.querySelectorAll('.navigation__item--is-last > a');\nconst navigationParentClass = 'navigation__item--is-parent';\nconst navigationItemActiveClass = 'navigation__item--is-active';\nconst navigationCurrentParentClass = 'navigation__item--is-current-parent';\nconst navigationHamburger = document.querySelector('.navigation__hamburger');\nconst navigationHamburgerClass = 'navigation__hamburger';\nconst navigationHamburgerActiveClass = 'navigation__hamburger navigation__hamburger--is-active';\nconst hamburgerActiveClass = 'hamburger--is-active';\nconst hamburgerIcon = document.querySelectorAll('.hamburger');\nconst subMenu = document.querySelectorAll('.navigation__submenu');\nconst subMenuClass = 'navigation__submenu';\nconst subMenuClassActive = 'navigation__submenu navigation__submenu--is-active';\nconst banner = document.querySelector('.banner.banner--is-post');\n\nlet lastScrollTop = 0;\nlet shiftOn = false;\n\nfunction navigationDropdown(event) {\n  const clientWidth = window.innerWidth || document.clientWidth || body.clientWidth;\n  if (event.keyCode === 13 || event.type === 'click') {\n    if (clientWidth < 1025 || event.type !== 'click') {\n      event.preventDefault();\n    }\n    \n    if (hasClass(this.nextElementSibling, subMenuClassActive)) {\n      this.nextElementSibling.setAttribute('class', subMenuClass); \n      this.setAttribute('aria-expanded', 'false');\n      if (hasClass(this.parentElement, navigationCurrentParentClass)) {\n        this.parentElement.setAttribute('class', `${navigationItemClass} ${navigationParentClass} ${navigationCurrentParentClass}`);\n      } else {\n        this.parentElement.setAttribute('class', `${navigationItemClass} ${navigationParentClass}`);\n      } \n    } else {\n      if (clientWidth > 1024) { // Only allow 1 dropdown open at once on desktop\n        navigationRemoveActiveClass();\n      }\n      this.nextElementSibling.setAttribute('class', subMenuClassActive); \n      this.setAttribute('aria-expanded', 'true');\n      if (hasClass(this.parentElement, navigationCurrentParentClass)) {\n        this.parentElement.setAttribute('class', `${navigationItemClass} ${navigationParentClass} ${navigationCurrentParentClass} ${navigationItemActiveClass}`); \n      } else {\n        this.parentElement.setAttribute('class', `${navigationItemClass} ${navigationParentClass} ${navigationItemActiveClass}`); \n      } \n    }\n  }\n}\n\nfunction navigationRemoveActiveClass() { // TS added this function so only 1 submenu can open at once on keyboard\n  const activeSubMenu = document.getElementsByClassName('navigation__submenu--is-active');\n  if (activeSubMenu.length > 0) {\n    activeSubMenu[0].parentElement.classList.remove(navigationItemActiveClass);\n    activeSubMenu[0].previousElementSibling.setAttribute('aria-expanded', 'false');\n    activeSubMenu[0].classList.remove('navigation__submenu--is-active');\n  }\n}\n\n\nfunction navigationDropdownLast(event) {\n  const clientWidth = window.innerWidth || document.clientWidth || body.clientWidth;\n  \n  if (clientWidth > 1024) {\n    if (shiftOn && event.keyCode === 9) {\n      shiftOn = false;\n    } else if (event.keyCode === 16) {\n      shiftOn = true;\n    } else {\n      this.parentElement.parentElement.setAttribute('class', subMenuClass);\n      this.parentElement.parentElement.parentElement.firstChild.setAttribute('aria-expanded', 'false');\n      this.parentElement.parentElement.parentElement.classList.remove(navigationItemActiveClass);\n    }\n  }\n}\n\nfunction navigationDropdownLeave() {\n  const clientWidth = window.innerWidth || document.clientWidth || body.clientWidth;\n  if (clientWidth > 1024) {\n    navigationRemoveActiveClass();\n  }\n}\n\nfunction hamburgerMenu(event) {\n  if (event.keyCode === 13 || event.type === 'click') {\n    event.preventDefault();\n    if (hasClass(this, hamburgerActiveClass)) {\n      body.setAttribute('class', ''); \n      navigation.setAttribute('class', navigationClass);\n      navigationContainer.setAttribute('class', navigationContainerClass);\n      navigationOverlay.setAttribute('class', navigationOverlayClass);\n      navigationHamburger.setAttribute('class', navigationHamburgerClass);\n      headerContainer.setAttribute('class', headerContainerStickyClass);\n      body.removeEventListener('touchmove', touchMovePreventDefault, false);\n      navigationOverlay.removeEventListener('touchmove', touchMovePreventDefault, false);\n      navigationContainer.removeEventListener('touchmove', touchMoveStopPropagation, false);\n    } else {\n      body.setAttribute('class', 'is-no-scroll'); \n      navigation.setAttribute('class', navigationActiveClass);\n      navigationContainer.setAttribute('class', navigationContainerActiveClass);\n      navigationOverlay.setAttribute('class', navigationOverlayActiveClass);\n      navigationHamburger.setAttribute('class', navigationHamburgerActiveClass);\n      headerContainer.setAttribute('class', headerContainerStickyClass);\n      body.addEventListener('touchmove', touchMovePreventDefault, false);\n      navigationOverlay.addEventListener('touchmove', touchMovePreventDefault, false);\n      navigationContainer.addEventListener('touchmove', touchMoveStopPropagation, false);\n    }\n  }\n}\n\nfunction stickyHeader() {\n  const pageHeight = document.documentElement.scrollHeight;\n  const currentScrollTop = window.pageYOffset\n    || document.documentElement.scrollTop\n    || document.body.scrollTop || 0;\n  const clientWidth = window.innerWidth || document.clientWidth || body.clientWidth;\n  const clientHeight = window.innerHeight || document.clientHeight || body.clientHeight;\n  const headerHeight = (clientWidth < 1025) ? 52 : 72; // TS header height on desktop is 72 now\n  // const bannerHeight = (clientWidth < 641) ? 312 : 380;\n  // const isSafari = (navigator.userAgent.toLocaleLowerCase().indexOf('safari') > -1);\n  // const hasBanner = Boolean(document.getElementsByClassName('banner__img')[0]);\n\n  //  if (isSafari && currentScrollTop <= bannerHeight && clientWidth < 1025 && hasBanner) { // TS iphone ipad Safari disable sticky header until scroll is biger than banner only on page has banner\n  // headerContainer.classList.remove('header__container--is-sticky', 'header__container--is-scrolling');\n  // } else\n\n  if (banner) {\n    if (window.pageYOffset < 1) {\n      banner.setAttribute('class', 'banner banner--is-post banner--is-top');\n    } else if (window.pageYOffset > clientHeight) {\n      banner.setAttribute('class', 'banner banner--is-post banner--is-hidden');\n    } else {\n      banner.setAttribute('class', 'banner banner--is-post');\n    } \n  }\n  \n  if (hasClass(navigation, navigationActiveClass)) {\n    headerContainer.setAttribute('class', headerContainerStickyClass);\n  } else if (currentScrollTop > lastScrollTop) { \n    if (currentScrollTop < headerHeight) {\n      headerContainer.setAttribute('class', headerContainerClass);\n    } else {\n      headerContainer.setAttribute('class', headerContainerScrollingClass);\n    }\n  } else if (currentScrollTop > pageHeight - clientHeight + headerHeight) {\n    headerContainer.setAttribute('class', headerContainerScrollingClass);\n  } else if (currentScrollTop < 1) { // TS adde this fix to remove fixed postion when scroll back to top\n    headerContainer.classList.remove('header__container--is-sticky', 'header__container--is-scrolling');\n  } else {\n    headerContainer.setAttribute('class', headerContainerStickyClass);\n  }\n  lastScrollTop = currentScrollTop;\n}\n\nfunction stickyHeaderIE(event) {\n  event.preventDefault();\n  const wd = event.wheelDelta;\n  const csp = window.pageYOffset;\n  window.scrollTo(0, csp - wd);\n}\n\nfunction overlayClose() {\n  if (hasClass(navigation, navigationActiveClass)) {\n    body.setAttribute('class', ''); \n    navigation.setAttribute('class', navigationClass);\n    navigationContainer.setAttribute('class', navigationContainerClass);\n    navigationHamburger.setAttribute('class', navigationHamburgerClass);\n    body.removeEventListener('touchmove', touchMovePreventDefault, false);\n    navigationOverlay.removeEventListener('touchmove', touchMovePreventDefault, false);\n    navigationContainer.removeEventListener('touchmove', touchMoveStopPropagation, false);\n  } \n}\n\nfunction touchMovePreventDefault(event) {\n  event.stopPropagation();\n  event.preventDefault();\n}\n\nfunction touchMoveStopPropagation(event) {\n  event.stopPropagation();\n}\n\nfunction hasClass(element, cls) {\n  return (` ${element.className} `).indexOf(` ${cls} `) > -1;\n}\n\n\nfunction insertMobileLanguageToggle() {\n  const mobileMenuElement = document.querySelector('#menu-main-navigation, #menu-main-navigation-fr, #menu-main-navigation-french');\n  const translationMenuElement = document.querySelector('#menu-translation-menu');\n  \n  if (mobileMenuElement && translationMenuElement) {\n    const clone = translationMenuElement.cloneNode(true);\n    mobileMenuElement.appendChild(clone);\n    const mobileTranslationMenu = mobileMenuElement.querySelector('#menu-translation-menu');\n    mobileTranslationMenu.classList.add('navigation__item');\n  }\n}\n\n\nfunction initializeNavigation() {\n  window.addEventListener('scroll', stickyHeader, false);\n  if (navigationOverlay) navigationOverlay.addEventListener('click', overlayClose, false);\n  if (navigator.userAgent.match(/Trident\\/7\\./)) { body.addEventListener('mousewheel', stickyHeaderIE, false); }\n  for (let i = 0; i < hamburgerIcon.length; i += 1) { \n    hamburgerIcon[i].addEventListener('click', hamburgerMenu, false);\n    hamburgerIcon[i].addEventListener('keypress', hamburgerMenu, false);\n  }\n  for (let i = 0; i < navigationParent.length; i += 1) { \n    navigationParent[i].addEventListener('click', navigationDropdown, false); \n    navigationParent[i].addEventListener('mouseout', navigationDropdownLeave, false);\n    navigationParent[i].addEventListener('keypress', navigationDropdown, false);\n    navigationParent[i].addEventListener('mousein', navigationDropdown, false);\n  }\n  for (let i = 0; i < subMenu.length; i += 1) { subMenu[i].addEventListener('mouseout', navigationDropdownLeave, false); }\n  for (let i = 0; i < navigationLast.length; i += 1) { navigationLast[i].addEventListener('keydown', navigationDropdownLast, false); }\n  insertMobileLanguageToggle();\n}\n\nwindow.addEventListener('DOMContentLoaded', initializeNavigation);\n","/* eslint-disable */\n/* global _satellite:true */\n\n/* GDPR Cookie Warning banner\n\nThis is the code controlling the display of the `Accept Cookies?` banner\n\n */\n\nimport { getCookie, setCookie } from '../utils/cookies';\n\ndocument.addEventListener('DOMContentLoaded', GdprCookieBanner);\n\n/**\n * Display Canada post cookie collecting policy per GDPR\n */\nfunction GdprCookieBanner(_options) {\n  const SELECTOR_MAIN_CONTAINER = '.main__container';\n  const SELECTOR_DISMISS_BANNER_CTAS = '.gdpr__button';\n  const SELECTOR_GDPR_COOKIE_BANNER_CONTAINER = '.gdpr';\n  const COOKIE_POLICY_ACCEPT = 'cpc-gdpr-cookie-policy-accept';\n  const CFG_EXCLUDED_PAGES = [\n    '/home.page'\n  ];\n\n  // Unlike other domains, the cookie for this site need to inherit it's width\n  window.onresize = () => {\n    setTimeout(() => {\n      resizeCookieWidth();\n    }, 250);\n  };\n  resizeCookieWidth();\n\n  const excludedPages = _options\n    ? _options.excludedPages || CFG_EXCLUDED_PAGES\n    : CFG_EXCLUDED_PAGES;\n\n    if (userHasAccepted() || isExcludedPage()) return;\n\n    loadBanner();\n\n  /**\n   * Check cookie value 'cpc-gdpr-cookie-policy-accept', if value is 'true', return true, otherwise return false.\n   */\n  function userHasAccepted() {\n    return getCookie(COOKIE_POLICY_ACCEPT) === 'true';\n  }\n\n  function isExcludedPage() {\n    const path = window.location.pathname;\n    for (let i = 0; i < excludedPages.length; i += 1) {\n      //\n      // TODO: to support regexp\n      //\n      if (path.indexOf(excludedPages[i]) !== -1) return true;\n    }\n\n    return false;\n  }\n\n  function loadBanner() {\n    createBannerElement();\n    registerEventHandler();\n\n    // When display the banner fire this call\n    track('cookiepolicy_presented');\n  }\n  function registerEventHandler() {\n    const dismissCtaElms = document.querySelectorAll(SELECTOR_DISMISS_BANNER_CTAS);\n    for (let i = 0; i < dismissCtaElms.length; i += 1) {\n      dismissCtaElms[i].addEventListener('click', onClick);\n      dismissCtaElms[i].addEventListener('keyup', onKeyup);\n    }\n  }\n\n  function onClick() {\n    dismissBanner();\n  }\n\n  function onKeyup(e) {\n    const key = e.which || e.keyCode;\n    if (key === 13) {\n      // enter key\n      e.preventDefault();\n      dismissBanner();\n    }\n  }\n\n  function dismissBanner() {\n    setCookie(COOKIE_POLICY_ACCEPT, 'true', 730, false, 'canadapost-postescanada.ca');\n\n    // when click, fire this to track\n    track('cookiepolicy_clicked');\n\n    const bannerElm = document.querySelector(SELECTOR_GDPR_COOKIE_BANNER_CONTAINER);\n    bannerElm.parentNode.removeChild(bannerElm);\n  }\n\n  function createBannerElement() {\n    const bannerElm = document.querySelector(SELECTOR_GDPR_COOKIE_BANNER_CONTAINER);\n    bannerElm.classList.remove('gdpr--is-hidden');\n\n    return\n  }\n\n  function track() {\n    if (typeof _satellite === 'undefined') {\n      console.debug('Ignore analytics as not defined');\n      return;\n    }\n\n    // _satellite.track(value);\n  }\n\n  function resizeCookieWidth() {\n    const bannerElm = document.querySelector(SELECTOR_GDPR_COOKIE_BANNER_CONTAINER);\n    const mainContainerWidth = document.querySelector(SELECTOR_MAIN_CONTAINER).offsetWidth;\n\n    if (bannerElm) {\n      bannerElm.style.width = mainContainerWidth + 'px';\n    }\n  }\n}\n\nexport default GdprCookieBanner;\n","function setCookie(cookieName, value, expiredays, ifEscape, domain) {\n  const exdate = new Date();\n  let expiredate;\n  let root = '';\n  let cookieValue = null;\n\n  if (domain) {\n    root = `;domain=${domain}`;\n  } else {\n    root = '';\n  }\n  exdate.setDate(exdate.getDate() + expiredays);\n  if (expiredays !== 0) {\n    expiredate = exdate.toGMTString();\n  } else {\n    expiredate = 0;\n  }\n  const expires = ((expiredays == null) ? '' : `;expires=${expiredate}${root};path=/`);\n\n  if (!ifEscape) {\n    cookieValue = escape(value);\n  }\n\n  document.cookie = `${cookieName}=${cookieValue}${expires}`;\n}\n\nfunction getCookie(cookieName) {\n  if (document.cookie.length > 0) {\n    let start = document.cookie.indexOf(`${cookieName}=`);\n    if (start !== -1) {\n      start = start + cookieName.length + 1;\n      let end = document.cookie.indexOf(';', start);\n      if (end === -1) {\n        end = document.cookie.length;\n      }\n      return unescape(document.cookie.substring(start, end));\n    }\n  }\n  return '';\n}\n\nexport { setCookie, getCookie };","import './events-empty/events-empty';","document.addEventListener('DOMContentLoaded', initializeAnimations);\n\nfunction initializeAnimations() {\n  if (document.getElementById('eventsEmpty')) {\n    const animation = window.bodymovin.loadAnimation({\n      container: document.getElementById('eventsEmpty'),\n      renderer: 'svg',\n      loop: false,\n      autoplay: false,\n      path: '/blogs/wp-c/themes/cpc-ch/js/animations/events-empty/events-empty.json'\n    });\n    setTimeout(() => { animation.play(); }, 250);\n  }\n}","/**\n * Gets the root of the current domain without the www, stgxx, or devxx prefix. \n * \n * Used for setting a domain specific cookie without the www, stg, dev, or prod prefixes\n * \n * I.e. www.canadapost-postescanada.ca : returns .canadapost-postescanada.ca\n * \n * @param {object} domain - Location object (window.location)\n */\nfunction getRootDomain(domain) {\n  const ipAddyRegEx = /\\d*\\.\\d*\\.\\d*\\.\\d*/i; \n\n  if (ipAddyRegEx.test(domain.hostname)) {\n    return domain.hostname;\n  }\n\n  return domain.hostname \n    ? domain.hostname.substring(domain.hostname.indexOf('.'))\n    : '';\n}\n\n// Used to determine if we're in production in order to sync up all of the redundant\n// LANG cookies\nfunction isProduction() {\n  return /^www.canadapost/i.test(window.location.hostname);\n}\n\n/**\n * Syncs up all redundant LANG cookies for the prod canadapost-postescanada.ca \n * domain. \n * \n * There are several domain cookie LANG variants \n * floating around, but it is\n * necessary to do this to reduce application stability risks. \n * \n * LANG domain www.canadapost-postescanada.ca\n * LANG domain .www.canadapost-postescanada.ca\n * \n * @param {string} lang - Either 'e', or 'f' as required by the language module\n */\nfunction syncAllLangCookies(lang, expiredays) { \n  if (isProduction()) {\n    const domain = window.location.hostname.toLowerCase();\n    setCookie('LANG', lang, expiredays, false, \n      domain);\n    setCookie('LANG', lang, expiredays, false, \n      `.${domain}`);\n  }\n}\n\nfunction setCookie(cookieName, value, expiredays, ifEscape, domain) {\n  const exdate = new Date();\n  let expiredate;\n  let root = '';\n  let cookieValue = null;\n\n  if (domain) {\n    root = `;domain=${domain}`;\n  } else { \n    root = '';\n  }\n  exdate.setDate(exdate.getDate() + expiredays);\n  if (expiredays !== 0) {\n    expiredate = exdate.toGMTString();\n  } else {\n    expiredate = 0;\n  }\n  const expires = ((expiredays == null) ? '' : `;expires=${expiredate}${root};path=/`);\n\n  if (!ifEscape) { \n    cookieValue = escape(value);\n  }\n  document.cookie = `${cookieName}=${cookieValue}${expires}`;\n}\n\nfunction getCookie(cookieName) {\n  if (document.cookie.length > 0) {\n    let start = document.cookie.indexOf(`${cookieName}=`);\n    if (start !== -1) {\n      start = start + cookieName.length + 1;\n      let end = document.cookie.indexOf(';', start);\n      if (end === -1) {\n        end = document.cookie.length;\n      }\n      return unescape(document.cookie.substring(start, end));\n    }\n  }\n  return '';\n}\n\nexport {\n  setCookie, getCookie, getRootDomain, syncAllLangCookies \n};","function getJSON(url, callback) {\r\n  const xhr = new XMLHttpRequest();\r\n  xhr.open('GET', url, true);\r\n  xhr.responseType = 'json';\r\n  xhr.onload = () => {\r\n    if (xhr.status >= 200 && xhr.status < 400) {\r\n      let responseData = xhr.response;\r\n      if (/Trident/.test(navigator.userAgent)) {\r\n        responseData = JSON.parse(xhr.response);\r\n      }\r\n      callback(responseData);\r\n    }\r\n  };\r\n  xhr.send();\r\n}\r\n\r\nexport default getJSON;","/* eslint-env jquery */\r\n\r\n/**\r\n * Responsible for rendering the global alert banner if a message is\r\n * available, and related user interactions\r\n */\r\nimport { getStore, storeKeys } from '../utils/data-store';\r\nimport { setPreoutClose } from './preoutClose.data';\r\nimport globals from '../utils/globals';\r\nimport MessageBannerData from './message-banner.data';\r\n\r\ndocument.addEventListener('DOMContentLoaded', initializeAlertBanner);\r\n\r\nfunction initializeAlertBanner() {\r\n  const bannerEle = document.querySelector('.header');\r\n\r\n  const globalBanner = new GlobalAlertBanner(bannerEle);\r\n  new MessageBannerData().initialize(globalBanner);\r\n}\r\n\r\nexport default class GlobalAlertBanner {\r\n  constructor(parentElement) {\r\n    this.parentElement = parentElement;\r\n  }\r\n\r\n  initialize() {\r\n    const bannerHtml = getBanner();\r\n    if (bannerHtml) {\r\n      if (this.parentElement) this.parentElement.insertAdjacentElement('afterend', bannerHtml.firstChild);\r\n      this.alertBanner = document.querySelector(`.${constants.globalAlertBannerClass}`);\r\n      this.closeButton = this.alertBanner.querySelector(`.${constants.closeIconClass}`);\r\n      setEventHandlers.call(this);\r\n    }\r\n  }\r\n}\r\n\r\n// Private implementation\r\n\r\nconst htmlTag = document.querySelector('html');\r\nconst locale = { \r\n  en: { \r\n    close: 'Close'\r\n  },\r\n  fr: { \r\n    close: 'Fermer'\r\n  }\r\n};\r\nlet language = 'en';\r\nconst frString = 'fr';\r\n\r\nif (htmlTag && ((htmlTag.getAttribute('class') && htmlTag.getAttribute('class').indexOf(frString) !== -1)\r\n  || (htmlTag.getAttribute('lang') && htmlTag.getAttribute('lang').indexOf(frString) !== -1))) {\r\n  language = frString;\r\n}\r\n\r\nconst constants = { \r\n  globalAlertBannerClass: 'cpc-global-alert-banner',\r\n  closeIconClass: 'close-icon'\r\n};\r\n\r\nconst template = items => `\r\n<div class=\"cpc-global-alert-banner-inner\">\r\n<div class=\"message\">\r\n  <div class=\"info\"></div>\r\n  ${items.message}\r\n</div>\r\n</div>\r\n<a href=\"#\" class=\"${constants.closeIconClass}\" ${globals.a11y.ariaLabel}=\"${items.closeAriaLabel}\"></a>\r\n`;\r\n\r\n/**\r\n * Returns null if there is no global alert banner, otherwise \r\n * returns a populated document fragment\r\n */\r\nfunction getBanner() {\r\n  const message = getStore(storeKeys.banner);\r\n  if (!message) return null;\r\n  const fragment = document.createDocumentFragment();\r\n  const containerDiv = createBannerContainer();\r\n  containerDiv.innerHTML = template({\r\n    message: message[language],\r\n    closeAriaLabel: locale[language].close\r\n  });\r\n  fragment.appendChild(containerDiv);\r\n  return fragment;\r\n}\r\n\r\nfunction createBannerContainer() {\r\n  const containerDiv = document.createElement('article');\r\n  containerDiv.setAttribute(globals.a11y.ariaRole, 'banner');\r\n  containerDiv.className = constants.globalAlertBannerClass;\r\n  return containerDiv;\r\n}\r\n\r\nfunction setEventHandlers() {\r\n  this.closeButton.addEventListener(globals.events.click, onCloseClick.bind(this));\r\n}\r\n\r\nfunction onCloseClick(evt) {\r\n  evt.preventDefault();\r\n  setBannerHeight.call(this);\r\n  // close class animates height of banner to 0\r\n\r\n  setTimeout(() => {\r\n    this.alertBanner.addEventListener('transitionend', () => {\r\n      this.alertBanner.parentNode.removeChild(this.alertBanner);\r\n    });\r\n    this.alertBanner.classList.add('close');\r\n  }, 0);\r\n  setPreoutClose('1');\r\n}\r\n\r\n/**\r\n * In order to animate a slide up well, you need to set the actual height of the element as a CSS style property and then animate the height to 0\r\n */\r\nfunction setBannerHeight() {\r\n  this.alertBanner.style.height = '';\r\n  const bannerHeight = getBannerHeight.call(this);\r\n  this.alertBanner.style.height = `${bannerHeight}px`;\r\n}\r\n\r\nfunction getBannerHeight() {\r\n  return this.alertBanner.getClientRects()[0].height;\r\n}\r\n","/* eslint-disable */\r\n// find polyfill\r\nif (!Array.prototype.find) {\r\n  Object.defineProperty(Array.prototype, 'find', {\r\n    value: function(predicate) {\r\n     // 1. Let O be ? ToObject(this value).\r\n      if (this == null) {\r\n        throw new TypeError('\"this\" is null or not defined');\r\n      }\r\n\r\n      var o = Object(this);\r\n\r\n      // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n      var len = o.length >>> 0;\r\n\r\n      // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n\r\n      // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n      var thisArg = arguments[1];\r\n\r\n      // 5. Let k be 0.\r\n      var k = 0;\r\n\r\n      // 6. Repeat, while k < len\r\n      while (k < len) {\r\n        // a. Let Pk be ! ToString(k).\r\n        // b. Let kValue be ? Get(O, Pk).\r\n        // c. Let testResult be ToBoolean(? Call(predicate, T, \" kValue, k, O \")).\r\n        // d. If testResult is true, return kValue.\r\n        var kValue = o[k];\r\n        if (predicate.call(thisArg, kValue, k, o)) {\r\n          return kValue;\r\n        }\r\n        // e. Increase k by 1.\r\n        k++;\r\n      }\r\n\r\n      // 7. Return undefined.\r\n      return undefined;\r\n    }\r\n  });\r\n}\r\n\r\n// startsWith polyfill \r\nif (!String.prototype.startsWith) {\r\n  String.prototype.startsWith = function(searchString, position){\r\n    position = position || 0;\r\n    return this.substr(position, searchString.length) === searchString;\r\n  };\r\n}\r\n\r\n// forEach polyfill\r\nif (!NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}","/* eslint no-console: 0 */\r\n/* eslint no-new: 0 */\r\n/* eslint no-undef: 0 */\r\n\r\n// import setLocaleEn from './locale_en';\r\n// import setLocaleFr from './locale_fr';\r\nimport globals from '../utils/globals';\r\nimport DomainParser from '../utils/domain-utils';\r\n\r\nconst cpDomain = new DomainParser(window.location.href).getCanadaPostDomainUrl('');\r\nconst searchTriggerValue = (document.getElementById('search_auto_suggest_trigger') && document.getElementById('search_auto_suggest_trigger').value) \r\n  ? document.getElementById('search_auto_suggest_trigger').value : 0;\r\nconst ptaSearchLengthTrigger = (searchTriggerValue > 0) ? searchTriggerValue : 400;\r\n\r\ndocument.addEventListener('DOMContentLoaded', initializeSearch);\r\n\r\nfunction initializeSearch(initOptions) {\r\n  let lang = document.querySelector('html').getAttribute('lang') ? document.querySelector('html').getAttribute('lang') : 'en';\r\n  if (lang.toLowerCase().indexOf('fr') !== -1) {\r\n    lang = 'fr';\r\n  } else {\r\n    lang = 'en';\r\n  }\r\n  const $ = window.jQuery;\r\n  const mobileWidth = globals.mobileUpperBound;\r\n  const searchURL = (document.getElementById('type_ahead_url') && document.getElementById('type_ahead_url').value) \r\n    ? document.getElementById('type_ahead_url').value : '/cpc/en/home/1514511013474.ajax';\r\n  const searchPageURL = `/web/${lang}/search.page?rankboost=&searchInput=`;\r\n\r\n  // const nav = lang === 'fr' ? setLocaleFr({ cpDomain }) : setLocaleEn({ cpDomain }); \r\n\r\n  const searchModal = document.createElement('section');\r\n  const cpcSearchModalId = 'cpcSearchModal';  \r\n  const bodyElement = document.querySelector('body');\r\n\r\n  /**\r\n   * Content Hub/Blog specific Logic\r\n   */  \r\n  // ole switch-a-roo\r\n\r\n  /*\r\n\r\n  const navItems = document.querySelectorAll('.navigation__item');\r\n  const searchDiv = document.querySelector('.navigation__container .nav-search');\r\n  const searchListItem = document.createElement('li');\r\n  searchListItem.innerHTML = searchDiv.innerHTML;\r\n  searchListItem.setAttribute('class', searchDiv.getAttribute('class'));\r\n  searchDiv.parentElement.removeChild(searchDiv);\r\n  navItems[navItems.length - 1].parentElement\r\n    .insertBefore(searchListItem, navItems[navItems.length - 1]);\r\n\r\n  */\r\n\r\n  const searchBtnElement = document.getElementById('searchBtn');\r\n  const searchBtnElementMobile = document.getElementById('searchMobileBtn');  \r\n\r\n  if (!searchBtnElement || !searchBtnElementMobile) return;\r\n\r\n  /**\r\n   * End of Content Hub/Blog specific Logic\r\n   */\r\n\r\n  // const searchContainer = document.querySelector('.utility-business-nav-search');\r\n  // if (!searchContainer) return;\r\n  // const searchBtnElement = document.querySelector('.utility-business-nav-search').querySelector('a');\r\n  // const searchBtnElementMobile = document.querySelector('.menu-search');\r\n\r\n  searchModal.setAttribute('id', cpcSearchModalId);\r\n  if (initOptions && initOptions.isCommonComponent) {\r\n    searchModal.classList.add(globals.cwc.componentClassName);\r\n  }\r\n  const searchModalElement = document.getElementById(`${cpcSearchModalId}`);\r\n  \r\n  searchBtnElement.addEventListener('click', showSearchClick);\r\n  searchBtnElement.addEventListener('keydown', showSearchKeyPress);\r\n  searchBtnElementMobile.addEventListener('click', showSearchClick);\r\n  searchBtnElementMobile.addEventListener('keydown', showSearchKeyPress);\r\n\r\n  const cpcSearchModal = document.getElementById('cpcSearchModal');\r\n  cpcSearchModal.addEventListener('click', hideSearchClick);\r\n\r\n  const searchPopup = document.getElementById('searchPopup');\r\n  searchPopup.addEventListener('click', cancelHideSearchClick);\r\n\r\n  const searchModalClose = document.getElementById('searchModalClose');\r\n  searchModalClose.addEventListener('click', hideSearchClick);\r\n  searchModalClose.addEventListener('keydown', hideSearchKeyPress);\r\n\r\n  const searchModalInput = document.getElementById('searchModalInput');\r\n  searchModalInput.addEventListener('keydown', searchKeyPress);\r\n\r\n  const searchInputError = document.getElementById('searchInputError');\r\n  searchInputError.addEventListener('click', hideInputError);\r\n  searchInputError.addEventListener('keydown', hideInputErrorKeyPress);\r\n\r\n  const searchModalBtn = document.getElementById('searchModalBtn');\r\n  searchModalBtn.addEventListener('click', () => { performSearch(false); });\r\n  searchModalBtn.addEventListener('keydown', performSearchKeypress);\r\n\r\n  const searchModalResults = document.getElementById('searchModalResults');\r\n\r\n  /* const searchModalQuickLinks = document.getElementById('searchModalQuickLinks');\r\n  const quickLinks = nav.nodes.find(ele => ele.labelId === 'QuickLinks');\r\n  searchModalQuickLinks.querySelector(':first-child').innerHTML = quickLinks.label;\r\n  quickLinks.nodes.forEach((n, i) => {\r\n    const quickLink = document.createElement('div');\r\n    quickLink.classList.add('search-modal-quick-link');\r\n    quickLink.setAttribute('role', 'option');\r\n    quickLink.innerHTML = n.label;\r\n    quickLink.addEventListener('click', () => { \r\n      window.location.href = n.link; \r\n    });\r\n    quickLink.addEventListener('keydown', (e) => {\r\n      const key = e.which || e.keyCode;\r\n      if (key === 13) {\r\n        window.location.href = n.link;\r\n      } else if (key === 27) {\r\n        hideSearchClick();\r\n      }      \r\n    });    \r\n    quickLink.tabIndex = 0;\r\n\r\n    if (i === quickLinks.nodes.length - 1) {\r\n      quickLink.addEventListener('keydown', (e) => {\r\n        const key = e.which || e.keyCode;\r\n        if (key === 9 && !e.shiftKey) {\r\n          e.preventDefault();\r\n          searchModalClose.focus();\r\n        }     \r\n      });     \r\n    }\r\n    searchModalQuickLinks.appendChild(quickLink);\r\n  }); */\r\n\r\n  /**\r\n   * Content Hub/Blog specific Logic\r\n   */  \r\n\r\n  const quickLinks = document.querySelectorAll('#searchModalQuickLinks .search-modal-quick-link');\r\n  quickLinks.forEach((quickLink, i) => {\r\n    quickLink.addEventListener('click', () => { \r\n      window.location.href = quickLink.getAttribute('data-href'); \r\n    });\r\n    quickLink.addEventListener('keydown', (e) => {\r\n      const key = e.which || e.keyCode;\r\n      if (key === 13) {\r\n        window.location.href = quickLink.getAttribute('data-href');\r\n      } else if (key === 27) {\r\n        hideSearchClick();\r\n      }      \r\n    });\r\n\r\n    if (i === quickLinks.length - 1) {\r\n      quickLink.addEventListener('keydown', (e) => {\r\n        const key = e.which || e.keyCode;\r\n        if (key === 9 && !e.shiftKey) {\r\n          e.preventDefault();\r\n          searchModalClose.focus();\r\n        }     \r\n      });     \r\n    }\r\n  });\r\n\r\n  /**\r\n   * End of Content Hub/Blog specific Logic\r\n   */\r\n\r\n  function showSearchClick(e) {\r\n    e.preventDefault();\r\n    searchModalElement.classList.add('show');\r\n    searchBtnElement.style.display = 'none';\r\n    searchBtnElement.setAttribute('aria-hidden', true);\r\n    searchPopup.setAttribute('aria-hidden', false);\r\n    searchBtnElementMobile.style.display = 'none';\r\n    bodyElement.classList.add('no-scroll');\r\n    bodyElement.classList.add('tingle-enabled');\r\n    const navIcon = document.getElementById('trigger');\r\n    if (navIcon) {\r\n      navIcon.classList.remove('active');\r\n    }\r\n\r\n    // screen reader may require a delay\r\n    setTimeout(() => {\r\n      searchModalInput.focus();\r\n    }, 500);    \r\n  }\r\n\r\n  function showSearchKeyPress(e) {\r\n    const key = e.which || e.keyCode;\r\n    if (key === 13) {\r\n      searchBtnElement.click();\r\n    } else if (key === 27) {\r\n      hideSearchClick();\r\n    }\r\n  }\r\n\r\n  function hideSearchClick() { \r\n    searchModalElement.classList.remove('show');\r\n    searchBtnElement.removeAttribute('style');\r\n    searchBtnElementMobile.removeAttribute('style');\r\n    bodyElement.classList.remove('no-scroll');\r\n    bodyElement.classList.remove('tingle-enabled');\r\n    searchModalInput.value = '';\r\n    searchModalResults.innerHTML = '';\r\n    searchModalBtn.classList.remove('highlight-search-icon');\r\n    searchModalBtn.classList.remove('show');\r\n    searchBtnElement.removeAttribute('aria-hidden');\r\n    hideInputError();\r\n    // screen reader may require a delay\r\n    if (searchBtnElement.getAttribute('data-activated-via') === 'keyboard') {\r\n      setTimeout(() => {\r\n        searchBtnElement.focus();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  function cancelHideSearchClick(e) {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  function hideSearchKeyPress(e) {\r\n    const key = e.which || e.keyCode;\r\n    if (key === 13) {\r\n      searchModalClose.click();\r\n    } else if (key === 27) {\r\n      hideSearchClick();\r\n    } else if (key === 9 && e.shiftKey) {\r\n      e.preventDefault();\r\n      const lastTabindex = searchModalElement.querySelectorAll('[tabindex]');      \r\n      lastTabindex[lastTabindex.length - 1].focus();\r\n    }\r\n  }\r\n\r\n  function searchKeyPress(e) {\r\n    const key = e.which || e.keyCode;\r\n    if (searchModalInput.value !== '' || key === 13 || key === 27) {\r\n      if (key !== 13 && key !== 27) {\r\n        searchModalBtn.classList.add('highlight-search-icon');\r\n        searchModalBtn.classList.add('show');\r\n      }\r\n\r\n      if (key === 13) {\r\n        performSearch(false, e);\r\n      } else if (key === 27) {\r\n        hideSearchClick();\r\n      } else if (searchModalInput.value.length > ptaSearchLengthTrigger) {\r\n        performSearch(true, e);\r\n      } else {\r\n        searchModalResults.innerHTML = '';\r\n        hideInputError();\r\n      }\r\n    } else {\r\n      searchModalBtn.classList.remove('highlight-search-icon');\r\n      searchModalBtn.classList.remove('show');\r\n    }\r\n  }\r\n\r\n  function performSearch(doSearch, evt) {\r\n    if (doSearch) {  \r\n      $.ajax({\r\n        type: 'POST',\r\n        url: searchURL,\r\n        data: { searchInput: searchModalInput.value },\r\n        success: function successHandler(data) {\r\n          const payload = JSON.parse($(data).find('SearchResult').text());\r\n          if (payload.ResultSet.length > 0) {\r\n            searchModalResults.innerHTML = '';\r\n            for (let i = 0, len = payload.ResultSet.length; i < len && i < 10; i += 1) {\r\n              const searchResult = document.createElement('div');\r\n              searchResult.classList.add('search-result');\r\n              searchResult.addEventListener('click', () => { \r\n                window.location.href = `${cpDomain}${searchPageURL}${payload.ResultSet[i].entry}`; \r\n              });\r\n              searchResult.addEventListener('keydown', (e) => {\r\n                const key = e.which || e.keyCode;\r\n                if (key === 13) {\r\n                  window.location.href = `${cpDomain}${searchPageURL}${payload.ResultSet[i].entry}`;\r\n                } else if (key === 27) {\r\n                  hideSearchClick();\r\n                }      \r\n              });                          \r\n\r\n              const regEx = new RegExp(searchModalInput.value, 'gi');\r\n              const innerHTML = payload.ResultSet[i].entry.replace(regEx, (match) => { \r\n                const resultMatch = `<b>${match}</b>`; \r\n                return resultMatch;\r\n              });\r\n\r\n              searchResult.innerHTML = innerHTML;\r\n              searchResult.tabIndex = 0;\r\n              searchModalResults.appendChild(searchResult);            \r\n            }\r\n          } else {\r\n            searchModalResults.innerHTML = '';\r\n          }\r\n        }\r\n      });\r\n    } else if ((document.body.clientWidth > mobileWidth && !doSearch)) {\r\n      if (searchModalInput.value !== '') {\r\n        window.location.href = `${cpDomain}${searchPageURL}${searchModalInput.value}`;\r\n      } else {\r\n        searchInputError.style.display = 'inline';\r\n        searchInputError.tabIndex = 0;\r\n        searchModalInput.tabIndex = -1;\r\n\r\n        const key = evt.which || evt.keyCode;\r\n        if (key === 13) {\r\n          searchInputError.focus();\r\n        }\r\n      }    \r\n    } else {\r\n      const searchEle = document.activeElement;\r\n      if (searchEle !== searchModalBtn) {\r\n        if (searchModalInput.value !== '') {\r\n          window.location.href = `${cpDomain}${searchPageURL}${searchModalInput.value}`;\r\n        } else {\r\n          searchInputError.style.display = 'inline';\r\n          searchInputError.tabIndex = 0;\r\n          searchModalInput.tabIndex = -1;\r\n\r\n          const key = evt.which || evt.keyCode;\r\n          if (key === 13) {\r\n            searchInputError.focus();\r\n          }\r\n        } \r\n      } else {\r\n        searchModalInput.value = '';\r\n        searchModalResults.innerHTML = '';\r\n        searchModalInput.focus();\r\n        searchModalBtn.classList.remove('highlight-search-icon');\r\n        searchModalBtn.classList.remove('show');      \r\n        hideInputError();\r\n      }\r\n    }\r\n  }\r\n\r\n  function performSearchKeypress(e) {\r\n    const key = e.which || e.keyCode;\r\n    if (key === 13) {\r\n      searchModalBtn.click();\r\n    } else if (key === 27) {\r\n      hideSearchClick();\r\n    }  \r\n  }\r\n\r\n  function hideInputError() {\r\n    searchInputError.removeAttribute('style');\r\n    searchModalInput.focus();\r\n    searchInputError.tabIndex = -1;\r\n    searchModalInput.tabIndex = 0;   \r\n  }\r\n\r\n  function hideInputErrorKeyPress() {\r\n    hideInputError();\r\n  }\r\n}\r\n\r\nexport default initializeSearch;","/* eslint-disable  */\n/**\n * File skip-link-focus-fix.js.\n *\n * Helps with accessibility for keyboard only users.\n *\n * Learn more: https://git.io/vWdr2\n */\n// (function () {\n//   var isIe = /(trident|msie)/i.test(navigator.userAgent);\n\n//   if (isIe && document.getElementById && window.addEventListener) {\n//     window.addEventListener('hashchange', () => {\n//       var id = location.hash.substring(1);\n\n        \n//       var element;\n\n//       if (!(/^[A-z0-9_-]+$/.test(id))) {\n//         return;\n//       }\n\n//       element = document.getElementById(id);\n\n//       if (element) {\n//         if (!(/^(?:a|select|input|button|textarea)$/i.test(element.tagName))) {\n//           element.tabIndex = -1;\n//         }\n\n//         element.focus();\n//       }\n//     }, false);\n//   }\n// }());\n\nclass SkipNavigation {\n  constructor(element) {\n    this.element = element;\n    this.target = element.hash;\n  }\n\n  static initialize(element) {\n    new SkipNavigation(element).addEvent();\n  }\n\n  addEvent() {\n    if (this.target) {\n      const tabindex = document.querySelector(`${this.target}`).hasAttribute('tabindex');\n      if (!tabindex) {\n        const mainContent = document.querySelector(`${this.target}`); \n        const mainContentAttr = document.createAttribute('tabindex'); \n        mainContentAttr.value = 0;\n        mainContent.setAttributeNode(mainContentAttr); \n      }\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', SkipNavigation.initialize(\n  document.getElementsByClassName('header__skip-to-main-content')[0]\n));\n","document.addEventListener('DOMContentLoaded', initializeTables);\n\nfunction initializeTables() {\n  const table = document.querySelectorAll('.table');\n\n  console.log(table);\n\n  if (table) {\n    for (let i = 0; i < table.length; i += 1) { \n      const prev = table[i].querySelector('.table__prev--is-active');\n      const next = table[i].querySelector('.table__next--is-active');\n      const tableTable = table[i].querySelector('.table__table tbody');\n      const tableTableColumns = tableTable.firstChild.childElementCount;\n      if (tableTableColumns > 2) {\n        if (prev) prev.addEventListener('click', changeTableColumn, false);\n        if (next) next.addEventListener('click', changeTableColumn, false);\n      } else {\n        if (prev) prev.setAttribute('class', 'table__prev');\n        if (next) next.setAttribute('class', 'table__next');\n      }\n    }\n  }\n  \n\n  function changeTableColumn(evt) {\n    evt.preventDefault(); \n    setTimeout(() => { \n      const direction = evt.target.getAttribute('class');\n      const tableDiv = this.parentElement;\n      const tableRows = tableDiv.querySelectorAll('.table__row');\n\n      for (let i = 0; i < tableRows.length; i += 1) { \n        const tableCells = tableRows[i].querySelectorAll('.table__cell');\n        const limit = tableCells.length - 1;\n        for (let y = 0; y < tableCells.length; y += 1) {\n          if (hasClass(tableCells[y], 'table__cell--is-active') && y <= limit) {\n            if (direction === 'table__next table__next--is-active') {\n              const first = tableCells[1];\n              const next = tableCells[y].nextElementSibling;\n              tableCells[y].setAttribute('class', 'table__cell table__cell--is-next-out');\n              setTimeout(() => { \n                tableCells[y].setAttribute('class', 'table__cell');\n              }, 500);\n              if (y < limit) {\n                next.setAttribute('class', 'table__cell table__cell--is-next-in table__cell--is-active');\n              } else {\n                first.setAttribute('class', 'table__cell table__cell--is-next-in table__cell--is-active');\n              }\n            } else {\n              const last = tableCells[limit];\n              const prev = tableCells[y].previousElementSibling;\n              tableCells[y].setAttribute('class', 'table__cell table__cell--is-prev-out');\n              setTimeout(() => { \n                tableCells[y].setAttribute('class', 'table__cell');\n              }, 500);\n              if (y === 1) {\n                last.setAttribute('class', 'table__cell table__cell--is-prev-in table__cell--is-active');\n              } else {\n                prev.setAttribute('class', 'table__cell table__cell--is-prev-in table__cell--is-active');\n              }\n            }\n            break;\n          }\n        }\n      }\n    }, 500);\n    evt.preventDefault();\n  }\n\n  function hasClass(element, cls) {\n    return (` ${element.className} `).indexOf(` ${cls} `) > -1;\n  }\n}\n\nexport default initializeTables;","document.addEventListener('DOMContentLoaded', initializeComponent);\n\nfunction initializeComponent() {\n  const viewing = document.querySelector('.pagination__viewing');\n  const loading = document.querySelector('.pagination__loading');\n\n  if (viewing) {\n    viewing.addEventListener('click', switchButtons, false);\n  }\n\n  function switchButtons() {\n    viewing.style.display = 'none';\n    loading.style.display = 'inline-block';\n  }\n}\n\n\n/*\n\nCallback Code for Infinite Scroll plugin\n\nconst viewing = document.querySelector('.pagination__viewing');\nconst loading = document.querySelector('.pagination__loading');\nviewing.style.display = 'inline-block';\nloading.style.display = 'none';\nlet url =viewing.href;\nlet pages = viewing.id;\nlet pieces = url.lastIndexOf('/');\nlet page = parseInt(url.substring(pieces + 1));\n\nif (page == pages) {\n  viewing.style.display = 'none';\n}\n\npage += 1;\nviewing.setAttribute(\"href\", \"page/\" + page);\n\n*/","/**\n * Determines if an element was focused via keyboard or mouse. \n * \n * Purpose is to prevent Chrome from adding a focus ring around an element\n * that is mouse clicked. There is currently a known Chromium bug around this \n * (https://bugs.chromium.org/p/chromium/issues/detail?id=271023) and a CSS\n * level 4 selector that is in the works to address it \n * (https://drafts.csswg.org/selectors/#the-focusring-pseudo)\n * \n * This accomplishes the same goal as the what-input plugin, https://github.com/ten1seven/what-input, \n * but with a smaller footprint\n */\nclass FocusRingHandler {\n  /**\n   * \n   * @param {string} elementTypes - querySelectorAll friendly list of \n   *        elements types \n   */\n  constructor(elementTypes) {\n    this.elementTypes = elementTypes;\n  }\n\n  /**\n   * Wires up focus and click handlers for outline determination\n   */\n  initialize() {\n    Array.prototype.slice.call(document.querySelectorAll(this.elementTypes)).forEach((element) => { \n      element.addEventListener('focus', onFocus);\n    });\n    Array.prototype.slice.call(document.querySelectorAll(this.elementTypes)).forEach((element) => { \n      element.addEventListener('click', onClick);\n    });\n  }\n}\n\nfunction onClick(evt) {\n  const isKeyboardActivated = isActivatedByKeyboard(evt);\n  if (evt.target) {\n    evt.target.setAttribute('data-activated-via', isKeyboardActivated ? 'keyboard' : 'mouse');\n  }\n}\n\nfunction onFocus(evt) {\n  if (evt.target) {\n    evt.target.removeAttribute('data-activated-via');\n  }\n}\n\nfunction isActivatedByKeyboard(evt) {\n  return (!evt.detail && (!evt.pointerType\n    || (evt.pointerType && !evt.pointerType))) || evt.mozInputSource === 6;\n}\n\n/**\n * Content hub - initialize on load\n */\n\nfunction setupFocusRingActivation() {\n  new FocusRingHandler('a').initialize();\n}\n\ndocument.addEventListener('DOMContentLoaded', setupFocusRingActivation);\n\n/**\n * End of Content hub specific code\n */\n\nexport default FocusRingHandler;"],"sourceRoot":""}